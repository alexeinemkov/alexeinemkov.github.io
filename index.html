<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>counter</title>
	<link href="https://fonts.googleapis.com/css?family=Black+Ops+One" rel="stylesheet"> 
	<style type="text/css">
		body{
			margin: 0;
			padding: 0;
			text-align: center;
			background: #3f4f3f;
			font-family: 'Black Ops One', cursive;


		}
		.counterBody {
			color:#fff;
			padding-top: 20%;
			font-size:6em;
			text-indent: 0px;
			
		}
		.counterBody div div{
			display: inline-block;
			width:2em;
		}
		.counterBody button{
			font-size: 0.2em;
			width:100px;
			height: 50px;
			padding: 0;
			margin: 0;
		}
	</style>
</head>
<body>
	<div class="counterBody">
		<div>
			<div id="minuts">00</div>:<div id="seconds">00</div>:<div id="mseconds">00</div>
		</div>
		<button id="startStop" onclick="counterStartStop()">START</button>
		<button id="reset" onclick="counterReset()">RESET</button>
	</div>
	<script>
		'use strict';
		function makeCounter() {
		    function counter() {
		       return counter.currentCount++;
		    };
		    counter.currentCount = 1;
		   	
		    return counter;
		}
		   
		var mseconds = makeCounter();
		var seconds = makeCounter();
		var minuts = makeCounter();
		var timerId;
		var flagCounterRun=false;
		var innerMinuts = document.getElementById('minuts');
		var innerSeconds = document.getElementById('seconds');
		var innerMseconds = document.getElementById('mseconds');
		var nameButtonStartStop = document.getElementById('startStop');
		function printCounter(){
			var bufMs=mseconds();
			bufMs<10?(bufMs='0'+bufMs.toString()):(bufMs=bufMs);
			//console.log(bufMs);
			if(bufMs==99){
				innerMseconds.innerHTML='00';
				mseconds.currentCount = 0;
				var bufSec=seconds();
				bufSec<10?(bufSec='0'+bufSec.toString()):(bufSec=bufSec);
				if(bufSec>59){
					innerSeconds.innerHTML='00';
					seconds.currentCount = 1;
					innerMinuts.innerHTML=minuts();
				}
				else{
					innerSeconds.innerHTML=bufSec;
				}
			}
			else {
				innerMseconds.innerHTML=bufMs;
			}
		}

		function counterStartStop(){
			if (flagCounterRun) {
				clearInterval(timerId);
				flagCounterRun=false;
				nameButtonStartStop.innerHTML='START';
			}
			else {
				flagCounterRun=true;
				timerId = setInterval(printCounter, 10);
				nameButtonStartStop.innerHTML='STOP';
			}
		}

		function counterReset() {
			clearInterval(timerId);
			flagCounterRun=false;
			minuts.currentCount = 1;
			seconds.currentCount = 1;
			mseconds.currentCount = 1;
			innerMinuts.innerHTML='00';
			innerSeconds.innerHTML='00';
			innerMseconds.innerHTML='00';
			nameButtonStartStop.innerHTML='START';
		}

	</script>
</body>
</html>
